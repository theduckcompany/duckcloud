{{range $idx, $inode := $.Inodes}}
{{ $folderURL := pathJoin "/browser" $.Folder.Space.ID $.Folder.Path}}
{{ $inodeURL := pathJoin $folderURL $inode.Name}}
{{ $downloadURL := pathJoin "/download" $.Folder.Space.ID $.Folder.Path .Name}}
{{ $lastIdx := sub (len $.Inodes) 1}}
{{ $filePath := pathJoin $.Folder.Path .Name}}

<div {{if (eq $idx $lastIdx)}}hx-get="{{$folderURL}}?last={{.Name}}" hx-trigger="revealed" hx-swap="afterend" {{end}}
  class="row border-bottom py-1 d-flex justify-content-between" id="row-{{.ID}}">
  <div class="col-9 col-md-7 position-relative text-truncate">
    <a class="link-dark user-select-none stretched-link" href="{{$inodeURL}}" {{if .IsDir}}hx-boost=true
      hx-swap="outerHTML" hx-target="{{$.ContentTarget}}" {{end}}>
      <i class="fas {{getInodeIconClass .Name .IsDir}} me-2 fa-2x"></i>
      <span class="fs-5">{{.Name}}</span>
    </a>
  </div>

  <div class="col-3 col-md-5 row text-center align-items-center">
    <div class="col-1 dropdown">
      <a class="btn btn-white btn-rounded shadow-0" role="button" id="dropdownMenuLink{{.ID}}" data-mdb-dropdown-init
        aria-expanded="false"><i class="fas fa-ellipsis-vertical fa-2x text-muted"></i></a>

      <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink{{.ID}}" style="font-size: 1rem;">
        <li><a class="dropdown-item text-black" href="{{$downloadURL}}" download><i
              class="fas fa-cloud-arrow-down me-2"></i>Download {{if .IsDir}}Folder{{else}}File{{end}}</a>
        </li>
        <li><a class="dropdown-item" href="/browser/rename?path={{$filePath}}&spaceID={{$.Folder.Space.ID}}"
            hx-target="#modal-target" data-mdb-target="#modal-target" data-mdb-ripple-init data-mdb-modal-init
            hx-trigger="click" hx-swap="innerHTML"
            hx-get="/browser/rename?path={{$filePath}}&spaceID={{$.Folder.Space.ID}}"><i
              class="fas fa-pencil me-2"></i>Rename</a>
        </li>
        <li><a class="dropdown-item" href="/browser/move?path={{$filePath}}&spaceID={{$.Folder.Space.ID}}"
            hx-target="#modal-target" data-mdb-target="#modal-target" data-mdb-ripple-init data-mdb-modal-init
            hx-trigger="click" hx-swap="innerHTML"
            hx-get="/browser/move?srcPath={{$filePath}}&dstPath={{$.Folder.Path}}&spaceID={{$.Folder.Space.ID}}"><i
              class="fas fa-arrows-up-down-left-right me-2"></i>Move</a>
        </li>

        <li>
          <hr class="dropdown-divider" />
        </li>
        <li><a class="dropdown-item text-danger" hx-target="#row-{{.ID}}" hx-swap="outerHTML"
            hx-delete="{{$inodeURL}}"><i class="fas fa-trash me-2"></i>Delete {{if
            .IsDir}}Folder{{else}}File{{end}}</a>
        </li>
      </ul>
    </div>

    <div class="col-4 text-muted d-none d-md-block d-lg-block d-xxl-block d-xl-block"> {{humanSize .Size}} </div>

    <div class="col-5 text-muted d-none d-md-block d-lg-block d-xxl-block d-xl-block"><a href="#"
        data-mdb-toggle="tooltip" class="text-muted" title="{{humanDate .LastModifiedAt}}">
        {{humanTime .LastModifiedAt}}</a>
    </div>
  </div>
</div>
{{end}}
